<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lensfun: lfModifier Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
MathJax.Hub.Config({
    messageStyle: "none"
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.3.0/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="lensfun-manual.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">lensfun
   &#160;<span id="projectnumber">0.3.95.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="structlfModifier-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lfModifier Struct Reference<div class="ingroups"><a class="el" href="group__Correction.html">Image correction</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A modifier object contains optimized data required to rectify a image.  
 <a href="structlfModifier.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="lensfun_8h_source.html">lensfun.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa466d796fd8d1afe88d6f2aad4424cdc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#aa466d796fd8d1afe88d6f2aad4424cdc">lfModifier</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, float crop, int width, int height)</td></tr>
<tr class="memdesc:aa466d796fd8d1afe88d6f2aad4424cdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an empty image modifier object.  <a href="#aa466d796fd8d1afe88d6f2aad4424cdc">More...</a><br /></td></tr>
<tr class="separator:aa466d796fd8d1afe88d6f2aad4424cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d97cd8c20f05f54d79af092edca9e1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a0d97cd8c20f05f54d79af092edca9e1a">Initialize</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, <a class="el" href="group__Correction.html#gaff4770bc2656179dcfe2da40a25f8148">lfPixelFormat</a> format, float focal, float aperture, float distance, float scale, <a class="el" href="group__Lens.html#gac853bb55ada6a58f12a68f6a1974f764">lfLensType</a> targeom, int flags, bool reverse)</td></tr>
<tr class="memdesc:a0d97cd8c20f05f54d79af092edca9e1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the process of correcting aberrations in a image.  <a href="#a0d97cd8c20f05f54d79af092edca9e1a">More...</a><br /></td></tr>
<tr class="separator:a0d97cd8c20f05f54d79af092edca9e1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975e5eab651b7da5545de8c32008ab64"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a975e5eab651b7da5545de8c32008ab64">Destroy</a> ()</td></tr>
<tr class="memdesc:a975e5eab651b7da5545de8c32008ab64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the modifier object.  <a href="#a975e5eab651b7da5545de8c32008ab64">More...</a><br /></td></tr>
<tr class="separator:a975e5eab651b7da5545de8c32008ab64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ebedf0fbdef0bf5a0f33557a8ab53e4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a2ebedf0fbdef0bf5a0f33557a8ab53e4">lfModifier</a> (float imgcrop, int imgwidth, int imgheight, <a class="el" href="group__Correction.html#gaff4770bc2656179dcfe2da40a25f8148">lfPixelFormat</a> pixel_format, bool reverse=false)</td></tr>
<tr class="memdesc:a2ebedf0fbdef0bf5a0f33557a8ab53e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an empty image modifier object.  <a href="#a2ebedf0fbdef0bf5a0f33557a8ab53e4">More...</a><br /></td></tr>
<tr class="separator:a2ebedf0fbdef0bf5a0f33557a8ab53e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc32c060c8d17ec8fca4d9968a57081"><td class="memItemLeft" align="right" valign="top"><a id="a7bc32c060c8d17ec8fca4d9968a57081"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a7bc32c060c8d17ec8fca4d9968a57081">~lfModifier</a> ()</td></tr>
<tr class="memdesc:a7bc32c060c8d17ec8fca4d9968a57081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modifier object destructor. <br /></td></tr>
<tr class="separator:a7bc32c060c8d17ec8fca4d9968a57081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88d4837249245cd31107f60d5d079922"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a88d4837249245cd31107f60d5d079922">EnableDistortionCorrection</a> (const <a class="el" href="structlfLensCalibDistortion.html">lfLensCalibDistortion</a> &amp;lcd)</td></tr>
<tr class="memdesc:a88d4837249245cd31107f60d5d079922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable distortion correction.  <a href="#a88d4837249245cd31107f60d5d079922">More...</a><br /></td></tr>
<tr class="separator:a88d4837249245cd31107f60d5d079922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8984aa6031f045f2d9788bb584e783"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#adb8984aa6031f045f2d9788bb584e783">EnableDistortionCorrection</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, float focal)</td></tr>
<tr class="memdesc:adb8984aa6031f045f2d9788bb584e783"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable distortion correction.  <a href="#adb8984aa6031f045f2d9788bb584e783">More...</a><br /></td></tr>
<tr class="separator:adb8984aa6031f045f2d9788bb584e783"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7cfc3e0f710030c2efe83228e00af4f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#ab7cfc3e0f710030c2efe83228e00af4f">EnableTCACorrection</a> (const <a class="el" href="structlfLensCalibTCA.html">lfLensCalibTCA</a> &amp;lctca)</td></tr>
<tr class="memdesc:ab7cfc3e0f710030c2efe83228e00af4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable TCA correction.  <a href="#ab7cfc3e0f710030c2efe83228e00af4f">More...</a><br /></td></tr>
<tr class="separator:ab7cfc3e0f710030c2efe83228e00af4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900e4a323f17b85faa8fbfeb1df16de6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a900e4a323f17b85faa8fbfeb1df16de6">EnableTCACorrection</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, float focal)</td></tr>
<tr class="memdesc:a900e4a323f17b85faa8fbfeb1df16de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable TCA correction.  <a href="#a900e4a323f17b85faa8fbfeb1df16de6">More...</a><br /></td></tr>
<tr class="separator:a900e4a323f17b85faa8fbfeb1df16de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28aa958797da9fb2cf50b5021c9b355e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a28aa958797da9fb2cf50b5021c9b355e">EnableVignettingCorrection</a> (const <a class="el" href="structlfLensCalibVignetting.html">lfLensCalibVignetting</a> &amp;lcv)</td></tr>
<tr class="memdesc:a28aa958797da9fb2cf50b5021c9b355e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable vignetting correction.  <a href="#a28aa958797da9fb2cf50b5021c9b355e">More...</a><br /></td></tr>
<tr class="separator:a28aa958797da9fb2cf50b5021c9b355e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28fcac7513833767864accb06527c0dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a28fcac7513833767864accb06527c0dc">EnableVignettingCorrection</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, float focal, float aperture, float distance)</td></tr>
<tr class="memdesc:a28fcac7513833767864accb06527c0dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable vignetting correction.  <a href="#a28fcac7513833767864accb06527c0dc">More...</a><br /></td></tr>
<tr class="separator:a28fcac7513833767864accb06527c0dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b49530a947cb801223e9a0b543ba8a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a4b49530a947cb801223e9a0b543ba8a1">EnableProjectionTransform</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, float focal, <a class="el" href="group__Lens.html#gac853bb55ada6a58f12a68f6a1974f764">lfLensType</a> target_projection)</td></tr>
<tr class="memdesc:a4b49530a947cb801223e9a0b543ba8a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable projection transform.  <a href="#a4b49530a947cb801223e9a0b543ba8a1">More...</a><br /></td></tr>
<tr class="separator:a4b49530a947cb801223e9a0b543ba8a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1feaf650910bc91f7c1c9464865c4b95"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a1feaf650910bc91f7c1c9464865c4b95">EnableScaling</a> (float scale)</td></tr>
<tr class="memdesc:a1feaf650910bc91f7c1c9464865c4b95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable image scaling.  <a href="#a1feaf650910bc91f7c1c9464865c4b95">More...</a><br /></td></tr>
<tr class="separator:a1feaf650910bc91f7c1c9464865c4b95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a740924776ffae74c79824f965cdbbf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a8a740924776ffae74c79824f965cdbbf">EnablePerspectiveCorrection</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, float focal, float *x, float *y, int count, float d)</td></tr>
<tr class="memdesc:a8a740924776ffae74c79824f965cdbbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the perspective correction.  <a href="#a8a740924776ffae74c79824f965cdbbf">More...</a><br /></td></tr>
<tr class="separator:a8a740924776ffae74c79824f965cdbbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaaf04bd6a1c32dab998dfc763f98692"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#adaaf04bd6a1c32dab998dfc763f98692">GetAutoScale</a> (bool reverse)</td></tr>
<tr class="memdesc:adaaf04bd6a1c32dab998dfc763f98692"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the automatic scale factor for the image.  <a href="#adaaf04bd6a1c32dab998dfc763f98692">More...</a><br /></td></tr>
<tr class="separator:adaaf04bd6a1c32dab998dfc763f98692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea5562a78c04946fc945237d318c669"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a6ea5562a78c04946fc945237d318c669">ApplyColorModification</a> (void *pixels, float x, float y, int width, int height, int comp_role, int row_stride) const</td></tr>
<tr class="memdesc:a6ea5562a78c04946fc945237d318c669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Image correction step 1: fix image colors.  <a href="#a6ea5562a78c04946fc945237d318c669">More...</a><br /></td></tr>
<tr class="separator:a6ea5562a78c04946fc945237d318c669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7739fa851629890b9daa04fef9979ab9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a7739fa851629890b9daa04fef9979ab9">ApplyGeometryDistortion</a> (float xu, float yu, int width, int height, float *res) const</td></tr>
<tr class="memdesc:a7739fa851629890b9daa04fef9979ab9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Image correction step 2: apply the transforms on a block of pixel coordinates.  <a href="#a7739fa851629890b9daa04fef9979ab9">More...</a><br /></td></tr>
<tr class="separator:a7739fa851629890b9daa04fef9979ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08d14d032746c06603fb6410ad5ecd6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#aa08d14d032746c06603fb6410ad5ecd6">ApplySubpixelDistortion</a> (float xu, float yu, int width, int height, float *res) const</td></tr>
<tr class="memdesc:aa08d14d032746c06603fb6410ad5ecd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Image correction step 3: apply subpixel distortions.  <a href="#aa08d14d032746c06603fb6410ad5ecd6">More...</a><br /></td></tr>
<tr class="separator:aa08d14d032746c06603fb6410ad5ecd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6726fa1203f35f0850ae18719a759d92"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a6726fa1203f35f0850ae18719a759d92">ApplySubpixelGeometryDistortion</a> (float xu, float yu, int width, int height, float *res) const</td></tr>
<tr class="memdesc:a6726fa1203f35f0850ae18719a759d92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply stage 2 &amp; 3 in one step.  <a href="#a6726fa1203f35f0850ae18719a759d92">More...</a><br /></td></tr>
<tr class="separator:a6726fa1203f35f0850ae18719a759d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0ce870d6f94f5a7cef5dd337ff21d643"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a> <a class="el" href="structlfModifier.html">lfModifier</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlfModifier.html#a0ce870d6f94f5a7cef5dd337ff21d643">Create</a> (const <a class="el" href="structlfLens.html">lfLens</a> *lens, float crop, int width, int height)</td></tr>
<tr class="memdesc:a0ce870d6f94f5a7cef5dd337ff21d643"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an empty image modifier object.  <a href="#a0ce870d6f94f5a7cef5dd337ff21d643">More...</a><br /></td></tr>
<tr class="separator:a0ce870d6f94f5a7cef5dd337ff21d643"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A modifier object contains optimized data required to rectify a image. </p>
<p>The desired image modifications are added by the EnableXXX() member functions. Every image modification has a corresponding inverse function, e.g. the library allows both to correct lens distortions and to simulate lens characteristics.</p>
<p>The normal order of applying a lens correction on a image is: </p><ol>
<li>
Fix lens vignetting </li>
<li>
Fix chromatic aberrations (TCA) </li>
<li>
Fix lens distortion </li>
<li>
Fix lens geometry </li>
<li>
Fix perspective </li>
<li>
Scale the image </li>
</ol>
<p>This is the theoretical order. But in reality, when using this library, the order is reversed (see <a class="el" href="corrections.html">How the corrections work</a> for an explanation):</p>
<ol>
<li>
Color<ol>
<li>
Fix lens vignetting </li>
</ol>
</li>
<li>
Coordinates<ol>
<li>
Scale the image </li>
<li>
Fix perspective </li>
<li>
Fix lens geometry </li>
<li>
Fix lens distortion </li>
</ol>
</li>
<li>
Subpixel coordinates<ol>
<li>
Fix chromatic aberrations (TCA) </li>
</ol>
</li>
</ol>
<p>This process is divided into three stages.</p>
<p>In the first stage, the colors of the image pixels are fixed (vignetting). You pass a pointer to your pixel data, and it will be modified in place.</p>
<p>Then, the distortions introduced by the lens are removed (distortion and geometry), perspective is corrected if desired, and an additional scaling factor is applied if required. This operation requires building new image in a new allocated buffer: you cannot modify the image in place, or bad things will happen. Note that Lensfun does not provide pixel interpolation routines. You have to implement the lookup in the original image yourself.</p>
<p>And finally, in the subpixel distortion stage, application corrects transversal chromatic aberrations. For every target pixel coordinate the modifier will return you three new coordinates: the first will tell you the coordinates of the red component, second of the green, and third of the blue component. This again requires copying the image, but you can use the same buffers as in stage two, just in reverse order.</p>
<p>Of course, you can skip some stages of the process, e.g. if you, for example, don't want to change a fisheye image to a rectilinear you can omit that step.</p>
<p>Obviously, when simulating lens distortions, the modification stages must be applied in reverse order. While the library takes care to reverse the steps which are grouped into a single stage, the application must apply the stages themselves in reverse order.</p>
<p>HOWEVER. Doing it in three stages is not memory efficient, and is prone to error accumulation because you have to interpolate pixels twice - once during stage 2 and once during stage 3. To avoid this, it is sensful to do stages 2 &amp; 3 in one step. In this case the output R,G,B coordinates from stage 2, which treats the colour channels equally, are fed directly into stage 3, which will correct the R,G,B coordinates further. <a class="el" href="structlfModifier.html#a6726fa1203f35f0850ae18719a759d92" title="Apply stage 2 &amp; 3 in one step. ">ApplySubpixelGeometryDistortion()</a> does this in a convenient fashion. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#_a16">lenstool.cpp</a>.</dd>
</dl></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa466d796fd8d1afe88d6f2aad4424cdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa466d796fd8d1afe88d6f2aad4424cdc">&#9670;&nbsp;</a></span>lfModifier() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a> lfModifier::lfModifier </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>crop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an empty image modifier object. </p>
<p>Before using the returned object you must add the required modifier callbacks (see methods AddXXXCallback below).</p>
<p>You must provide the original image width/height even if you plan to correct just a part of the image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>For all modifications, the crop factor, aspect ratio, and center shift of this lens will be used. </td></tr>
    <tr><td class="paramname">crop</td><td>The crop factor for current camera. The distortion models will take this into account if lens models were measured on a camera with a different crop factor. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the image you want to correct. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the image you want to correct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2ebedf0fbdef0bf5a0f33557a8ab53e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ebedf0fbdef0bf5a0f33557a8ab53e4">&#9670;&nbsp;</a></span>lfModifier() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lfModifier::lfModifier </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>imgcrop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>imgwidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>imgheight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Correction.html#gaff4770bc2656179dcfe2da40a25f8148">lfPixelFormat</a>&#160;</td>
          <td class="paramname"><em>pixel_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reverse</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an empty image modifier object. </p>
<p>Before using the returned object you must enable the desired kind of correction.</p>
<p>You must provide the original image width/height even if you plan to correct just a part of the image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">imgcrop</td><td>The crop factor for the image to be processed. The distortion models will take this into account if lens models were measured on a camera with a different crop factor. </td></tr>
    <tr><td class="paramname">imgwidth</td><td>The width of the image you want to correct. </td></tr>
    <tr><td class="paramname">imgheight</td><td>The height of the image you want to correct. </td></tr>
    <tr><td class="paramname">pixel_format</td><td>Pixel format of your image (bits per pixel component). </td></tr>
    <tr><td class="paramname">reverse</td><td>If this parameter is true, a reverse transform will be prepared. That is, you take a undistorted image at input and convert it so that it will look as if it would be a shot made with <em>lens</em>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6ea5562a78c04946fc945237d318c669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ea5562a78c04946fc945237d318c669">&#9670;&nbsp;</a></span>ApplyColorModification()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lfModifier::ApplyColorModification </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pixels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>comp_role</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row_stride</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Image correction step 1: fix image colors. </p>
<p>This currently is only vignetting transform. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixels</td><td>This points to image pixels. The actual pixel format depends on both pixel_format and comp_role arguments. The results are stored in place in the same format. Warning: this array should be aligned at least on a 16-byte boundary. </td></tr>
    <tr><td class="paramname">x</td><td>The X coordinate of the corner of the block. </td></tr>
    <tr><td class="paramname">y</td><td>The Y coordinate of the corner of the block. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the image block in pixels. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the image block in pixels. </td></tr>
    <tr><td class="paramname">comp_role</td><td>The role of every pixel component. This is a bitfield, made by one of the LF_CR_X macros which defines the roles of every pixel field. For example, <a class="el" href="group__Correction.html#gae3340956c99189894a5efbf2991d8039" title="This macro defines a pixel format consisting of four components. ">LF_CR_4(RED,GREEN,BLUE,UNKNOWN)</a> will define a RGBA (or RGBX) pixel format, and the UNKNOWN field will not be modified. </td></tr>
    <tr><td class="paramname">row_stride</td><td>The size of a image row in bytes. This can be actually different from width * pixel_width as some image formats use funny things like alignments, filler bytes etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if return buffer has been altered, false if nothing to do </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a19">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="a7739fa851629890b9daa04fef9979ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7739fa851629890b9daa04fef9979ab9">&#9670;&nbsp;</a></span>ApplyGeometryDistortion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lfModifier::ApplyGeometryDistortion </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>xu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>yu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Image correction step 2: apply the transforms on a block of pixel coordinates. </p>
<p>The undistorted coordinates are computed for every pixel in a rectangular block: \((x_u, y_u), (x_u+1, y_u), \ldots, (x_u + \mathrm{width} - 1, y_u), (x_u, y_u + 1), \ldots, (x_u + \mathrm{width} - 1, y_u + \mathrm{height} - 1)\).</p>
<p>The corrected coordinates are put into the output buffer sequentially, X and Y values.</p>
<p>This routine has been designed to be safe to use in parallel from several threads. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xu</td><td>The undistorted X coordinate of the start of the block of pixels. </td></tr>
    <tr><td class="paramname">yu</td><td>The undistorted Y coordinate of the start of the block of pixels. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the block in pixels. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the block in pixels. </td></tr>
    <tr><td class="paramname">res</td><td>A pointer to an output array which receives the respective X and Y distorted coordinates for every pixel of the block. The size of this array must be at least width*height*2 elements. Warning: this array should be aligned at least on a 16-byte boundary. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if return buffer has been filled, false if nothing to do </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a21">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="aa08d14d032746c06603fb6410ad5ecd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa08d14d032746c06603fb6410ad5ecd6">&#9670;&nbsp;</a></span>ApplySubpixelDistortion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lfModifier::ApplySubpixelDistortion </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>xu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>yu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Image correction step 3: apply subpixel distortions. </p>
<p>The undistorted R,G,B coordinates are computed for every pixel in a square block: \((x_u, y_u), (x_u+1, y_u), \ldots, (x_u + \mathrm{width} - 1, y_u), (x_u, y_u + 1), \ldots, (x_u + \mathrm{width} - 1, y_u + \mathrm{height} - 1)\).</p>
<p>Returns the corrected coordinates separately for R/G/B channels The resulting coordinates are put into the output buffer sequentially, X and Y values.</p>
<p>This routine has been designed to be safe to use in parallel from several threads. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xu</td><td>The undistorted X coordinate of the start of the block of pixels. </td></tr>
    <tr><td class="paramname">yu</td><td>The undistorted Y coordinate of the start of the block of pixels. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the block in pixels. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the block in pixels. </td></tr>
    <tr><td class="paramname">res</td><td>A pointer to an output array which receives the respective X and Y distorted coordinates of the red, green and blue channels for every pixel of the block. The size of this array must be at least width*height*2*3 elements. Warning: this array should be aligned at least on a 16-byte boundary. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if return buffer has been filled, false if nothing to do </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a18">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="a6726fa1203f35f0850ae18719a759d92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6726fa1203f35f0850ae18719a759d92">&#9670;&nbsp;</a></span>ApplySubpixelGeometryDistortion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lfModifier::ApplySubpixelGeometryDistortion </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>xu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>yu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply stage 2 &amp; 3 in one step. </p>
<p>See the main comment to the <a class="el" href="structlfModifier.html" title="A modifier object contains optimized data required to rectify a image. ">lfModifier</a> class. The undistorted (R, G, B) coordinates are computed for every pixel in a square block: \((x_u, y_u), (x_u+1, y_u), \ldots, (x_u + \mathrm{width} - 1, y_u), (x_u, y_u + 1), \ldots, (x_u + \mathrm{width} - 1, y_u + \mathrm{height} - 1)\).</p>
<p>Returns the corrected coordinates separately for R/G/B channels The resulting coordinates are put into the output buffer sequentially, X and Y values.</p>
<p>This routine has been designed to be safe to use in parallel from several threads. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xu</td><td>The undistorted X coordinate of the start of the block of pixels. </td></tr>
    <tr><td class="paramname">yu</td><td>The undistorted Y coordinate of the start of the block of pixels. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the block in pixels. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the block in pixels. </td></tr>
    <tr><td class="paramname">res</td><td>A pointer to an output array which receives the respective X and Y distorted coordinates for every pixel of the block. The size of this array must be at least width*height*2*3 elements. Warning: this array should be aligned at least on a 16-byte boundary. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if return buffer has been filled, false if nothing to do </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a17">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="a0ce870d6f94f5a7cef5dd337ff21d643"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ce870d6f94f5a7cef5dd337ff21d643">&#9670;&nbsp;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a> <a class="el" href="structlfModifier.html">lfModifier</a>* lfModifier::Create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>crop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an empty image modifier object. </p>
<p>Before using the returned object you must add the required modifier callbacks (see methods AddXXXCallback below).</p>
<p>You must provide the original image width/height even if you plan to correct just a part of the image.</p>
<p>This function is deprecated and will be removed in the future. Please use the standard constructor instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>For all modifications, the crop factor, aspect ratio, and center shift of this lens will be used. </td></tr>
    <tr><td class="paramname">crop</td><td>The crop factor for current camera. The distortion models will take this into account if lens models were measured on a camera with a different crop factor. </td></tr>
    <tr><td class="paramname">width</td><td>The width of the image you want to correct. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the image you want to correct. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new empty image modifier object. </dd></dl>

</div>
</div>
<a id="a975e5eab651b7da5545de8c32008ab64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975e5eab651b7da5545de8c32008ab64">&#9670;&nbsp;</a></span>Destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a> void lfModifier::Destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the modifier object. </p>
<p>This function is deprecated and will be removed in the future. Please use the standard destructor instead. </p>

</div>
</div>
<a id="a88d4837249245cd31107f60d5d079922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88d4837249245cd31107f60d5d079922">&#9670;&nbsp;</a></span>EnableDistortionCorrection() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableDistortionCorrection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLensCalibDistortion.html">lfLensCalibDistortion</a> &amp;&#160;</td>
          <td class="paramname"><em>lcd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable distortion correction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lcd</td><td>Lens calibration data to be used for the correction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a42">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="adb8984aa6031f045f2d9788bb584e783"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb8984aa6031f045f2d9788bb584e783">&#9670;&nbsp;</a></span>EnableDistortionCorrection() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableDistortionCorrection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>focal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable distortion correction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>Lens object to be used for the correction. </td></tr>
    <tr><td class="paramname">focal</td><td>The focal length in mm at which the image was taken. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>

</div>
</div>
<a id="a8a740924776ffae74c79824f965cdbbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a740924776ffae74c79824f965cdbbf">&#9670;&nbsp;</a></span>EnablePerspectiveCorrection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnablePerspectiveCorrection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>focal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable the perspective correction. </p>
<p>Depending on the number of control points given, there are three possible modes:</p>
<p>4 control points: c0 and c1 define one vertical lines, c2 and c3 the other. The focal length defined in the creation of the modifier is used to get the proper aspect ratio.</p>
<p>6 control points: c0 to c3 like above. c4 and c5 define a horizontal line. The focal length is used to get the proper aspect ratio.</p>
<p>8 control points: c0 to c5 like above. c6 and c7 define a second horizontal line. The focal length is not used.</p>
<p>5 control points: They all must lie on an ellipse that is actually a rotated circle. If they lie in a clockwise ordering, the vertex is assumed to be above the ellipse centre in the image. If they lie in a counter-clockwise ordering, the vertex is assumed to be below the ellipse. The focal length is needed to find the proper vertex.</p>
<p>7 control points: c0 to c4 like above. c5 and c6 define a horizontal line which is used to rotate the final image nicely.</p>
<p>If the lines constructed from the first four control points for the 4, 6 and 8 points case (or the last two for the 7 points case) are more horizontal than vertical, in all of the above, "horizontal" and "vertical" need to be swapped.</p>
<p>All control points must be given as pixel coordinates in the original image. For best precision, anti-distortion should have been applied before taking the coordinates. Moreover, fisheye images must have been transformed into rectilinear of the same focal length. In contrast, cropping, rotating, shifting, or scaling must be switched off.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>Lens object to be used for the transform. </td></tr>
    <tr><td class="paramname">focal</td><td>The focal length in mm at which the image was taken. </td></tr>
    <tr><td class="paramname">x</td><td>The x coordinates of the control points. </td></tr>
    <tr><td class="paramname">y</td><td>The y coordinates of the control points. </td></tr>
    <tr><td class="paramname">count</td><td>The number of control points. </td></tr>
    <tr><td class="paramname">d</td><td>This parameter is supposed to be offered to the user as a slider. It can take values from -1 to +1. 0 denotes the perfect correction. -1 is the unchanged image. +1 is an increase of the tilting angle by 25%. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>

</div>
</div>
<a id="a4b49530a947cb801223e9a0b543ba8a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b49530a947cb801223e9a0b543ba8a1">&#9670;&nbsp;</a></span>EnableProjectionTransform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableProjectionTransform </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>focal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Lens.html#gac853bb55ada6a58f12a68f6a1974f764">lfLensType</a>&#160;</td>
          <td class="paramname"><em>target_projection</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable projection transform. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>Lens object to be used for the transform. </td></tr>
    <tr><td class="paramname">focal</td><td>The focal length in mm at which the image was taken. </td></tr>
    <tr><td class="paramname">target_projection</td><td>The target projection type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a43">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="a1feaf650910bc91f7c1c9464865c4b95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1feaf650910bc91f7c1c9464865c4b95">&#9670;&nbsp;</a></span>EnableScaling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableScaling </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>scale</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable image scaling. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scale</td><td>Scale factor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a44">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="ab7cfc3e0f710030c2efe83228e00af4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7cfc3e0f710030c2efe83228e00af4f">&#9670;&nbsp;</a></span>EnableTCACorrection() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableTCACorrection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLensCalibTCA.html">lfLensCalibTCA</a> &amp;&#160;</td>
          <td class="paramname"><em>lctca</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable TCA correction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lctca</td><td>Lens calibration data to be used for the correction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a40">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="a900e4a323f17b85faa8fbfeb1df16de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a900e4a323f17b85faa8fbfeb1df16de6">&#9670;&nbsp;</a></span>EnableTCACorrection() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableTCACorrection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>focal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable TCA correction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>Lens object to be used for the correction. </td></tr>
    <tr><td class="paramname">focal</td><td>The focal length in mm at which the image was taken. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>

</div>
</div>
<a id="a28aa958797da9fb2cf50b5021c9b355e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28aa958797da9fb2cf50b5021c9b355e">&#9670;&nbsp;</a></span>EnableVignettingCorrection() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableVignettingCorrection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLensCalibVignetting.html">lfLensCalibVignetting</a> &amp;&#160;</td>
          <td class="paramname"><em>lcv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable vignetting correction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lcv</td><td>Lens calibration data to be used for the correction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="lenstool_8cpp-example.html#a41">lenstool.cpp</a>.</dd>
</dl>
</div>
</div>
<a id="a28fcac7513833767864accb06527c0dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28fcac7513833767864accb06527c0dc">&#9670;&nbsp;</a></span>EnableVignettingCorrection() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lfModifier::EnableVignettingCorrection </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>focal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>aperture</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>distance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable vignetting correction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>Lens object to be used for the correction. </td></tr>
    <tr><td class="paramname">focal</td><td>The focal length in mm at which the image was taken. </td></tr>
    <tr><td class="paramname">aperture</td><td>The aperture (f-number) at which the image was taken. </td></tr>
    <tr><td class="paramname">distance</td><td>The approximative focus distance in meters (distance &gt; 0). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. </dd></dl>

</div>
</div>
<a id="adaaf04bd6a1c32dab998dfc763f98692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaaf04bd6a1c32dab998dfc763f98692">&#9670;&nbsp;</a></span>GetAutoScale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float lfModifier::GetAutoScale </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reverse</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the automatic scale factor for the image. </p>
<p>This expects that all coordinate distortion callbacks are already set up and working. The function will try at its best to find a scale value that will ensure that no pixels with coordinates out of range will get into the resulting image. But since this is an approximative method, the returned scale sometimes is a little less than the optimal scale (e.g. you can still get some black corners with some high-distortion cases). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reverse</td><td>If true, the reverse scaling factor is computed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0d97cd8c20f05f54d79af092edca9e1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d97cd8c20f05f54d79af092edca9e1a">&#9670;&nbsp;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Auxiliary.html#gac1e8a42306d8e67cb94ca31c3956ee78">DEPRECATED</a> int lfModifier::Initialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structlfLens.html">lfLens</a> *&#160;</td>
          <td class="paramname"><em>lens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Correction.html#gaff4770bc2656179dcfe2da40a25f8148">lfPixelFormat</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>focal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>aperture</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__Lens.html#gac853bb55ada6a58f12a68f6a1974f764">lfLensType</a>&#160;</td>
          <td class="paramname"><em>targeom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>reverse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the process of correcting aberrations in a image. </p>
<p>The modifier object will be set up to rectify all aberrations found in the lens description. Make sure the focal length, aperture, and focus distance are correct in order to ensure proper rectification.</p>
<p>Aperture and focus distance are only used for vignetting correction. Because the dependence of vignetting on focus distance is very small, and it is usually not available in EXIF data, you may give an approximative value here. If you really do not know, as a last resort, use "1000" as a default value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lens</td><td>The lens which aberrations you want to correct in a image. It should be the same lens object as the one passed to the <a class="el" href="structlfModifier.html" title="A modifier object contains optimized data required to rectify a image. ">lfModifier</a> constructor. </td></tr>
    <tr><td class="paramname">format</td><td>Pixel format of your image (bits per pixel component) </td></tr>
    <tr><td class="paramname">focal</td><td>The focal length in mm at which the image was taken. </td></tr>
    <tr><td class="paramname">aperture</td><td>The aperture (f-number) at which the image was taken. </td></tr>
    <tr><td class="paramname">distance</td><td>The approximative focus distance in meters (distance &gt; 0). </td></tr>
    <tr><td class="paramname">scale</td><td>An additional scale factor to be applied onto the image (1.0 - no scaling; 0.0 - automatic scaling). </td></tr>
    <tr><td class="paramname">targeom</td><td>Target geometry. If LF_MODIFY_GEOMETRY is set in <em>flags</em> and <em>targeom</em> is different from lens-&gt;Type, a geometry conversion will be applied on the image. </td></tr>
    <tr><td class="paramname">flags</td><td>A set of flags (se LF_MODIFY_XXX) telling which distortions you want corrected. A value of LF_MODIFY_ALL orders correction of everything possible (will enable all correction models present in lens description). </td></tr>
    <tr><td class="paramname">reverse</td><td>If this parameter is true, a reverse transform will be prepared. That is, you take a undistorted image at input and convert it so that it will look as if it would be a shot made with <em>lens</em>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A set of LF_MODIFY_XXX flags in effect. This is the <em>flags</em> argument with dropped bits for operations which are actually no-ops. </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="lensfun_8h_source.html">lensfun.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 28 2018 22:33:40 for lensfun by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
